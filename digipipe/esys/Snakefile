import os
from snakemake.remote.HTTP import RemoteProvider as HTTPRemoteProvider

HTTP = HTTPRemoteProvider()

scenario_groups = {
    "all-scenarios": [
        os.path.splitext(scenario)[0] for scenario in os.listdir("esys/scenarios")
    ]
}

# Include rules for intermediate steps
include: "snakemake_rules/build_datapackage.smk"
include: "snakemake_rules/prepare_resource.smk"
include: "snakemake_rules/optimization.smk"
include: "snakemake_rules/postprocessing.smk"
include: "snakemake_rules/create_empty_scalars.smk"

rule make_esys_appdata:
    input:
        plots=expand(
            "store/appdata/esys/{scenario}/preprocessed",
            scenario=scenario_groups["all-scenarios"]
        )